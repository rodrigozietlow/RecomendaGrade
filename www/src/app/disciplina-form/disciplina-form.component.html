<form (submit)="salvarDisciplina()" [formGroup]="form" class="my-3">

	<div class="form-group">
		<label for="periodo">{{provider.curso.nomePeriodos}}:</label>
		<input type="number" class="form-control" id="periodo" name="periodo" [(ngModel)]="objetoDisciplina.periodo" formControlName="periodo" placeholder="Digite o {{provider.curso.nomePeriodos | lowercase}}">
	</div>
	<div *ngIf="form.controls['periodo'].invalid && (form.controls['periodo'].dirty || form.controls['periodo'].touched)" class="alert alert-danger" role="alert">
		<strong>Erros:</strong>
		<div *ngIf="form.controls['periodo'].errors.required">
			Você deve preencher a quantidade
		</div>
		<div *ngIf="form.controls['periodo'].errors.max">
			O curso possui o máximo de {{provider.curso.qtPeriodos}} {{provider.curso.nomePeriodos | lowercase}}s. Informe um {{provider.curso.nomePeriodos | lowercase}} válido para esta disciplina
		</div>
		<div *ngIf="form.controls['periodo'].errors.min">
			Mínimo 1 período
		</div>
	</div>



	<div class="form-group">
		<label for="nome">Nome:</label>
		<input type="text" class="form-control" name="nome" [(ngModel)]="objetoDisciplina.nome" formControlName="nome" placeholder="Digite o nome da disciplina">
	</div>
	<div *ngIf="form.controls['nome'].invalid && (form.controls['nome'].dirty || form.controls['nome'].touched)" class="alert alert-danger" role="alert">
		<strong>Erros:</strong>
		<div *ngIf="form.controls['nome'].errors.required">
			Você deve preencher o nome da disciplina
		</div>
		<div *ngIf="form.controls['nome'].errors.maxlength">
			Informe um nome para a disciplina com no máximo de 100 caracteres
		</div>
	</div>

	<div class="form-group">
		<label for="creditos">Quantidade de créditos semanais:</label>
		<input type="number" class="form-control" name="creditos" id="creditos" min="1" [(ngModel)]="objetoDisciplina.creditos" formControlName="creditos" placeholder="Digite a quantidade">
	</div>
	<div *ngIf="form.controls['creditos'].invalid && (form.controls['creditos'].dirty || form.controls['creditos'].touched)" class="alert alert-danger" role="alert">
		<strong>Erros:</strong>
		<div *ngIf="form.controls['creditos'].errors.required">
			Você deve preencher a quantidade de créditos
		</div>
		<div *ngIf="form.controls['creditos'].errors.max">
			Máximo 127 créditos
		</div>
		<div *ngIf="form.controls['creditos'].errors.min">
			Mínimo 1 crédito
		</div>
	</div>

	<div class="form-group">
		<label for="cargaHoraria">Carga horária total (em horas):</label>
		<input type="number" class="form-control" name="cargaHoraria" min="1" [(ngModel)]="objetoDisciplina.cargaHoraria" formControlName="cargaHoraria" placeholder="Digite a carga horária">
	</div>
	<div *ngIf="form.controls['cargaHoraria'].invalid && (form.controls['cargaHoraria'].dirty || form.controls['cargaHoraria'].touched)" class="alert alert-danger" role="alert">
		<strong>Erros:</strong>
		<div *ngIf="form.controls['cargaHoraria'].errors.required">
			Você deve preencher a carga horária total da disciplina
		</div>
		<div *ngIf="form.controls['cargaHoraria'].errors.max">
			Máximo {{provider.curso.cargaMinima}} horas de carga horária
		</div>
		<div *ngIf="form.controls['cargaHoraria'].errors.min">
			Mínimo 1 hora
		</div>
	</div>

	<h4>Requisitos</h4>
	<!--<div *ngIf="objetoDisciplina != undefined"> -->
		<div class="form-row" *ngFor="let requisito of objetoDisciplina.requisitos; let i = index">
			<div class="form-group col-sm-5">
				<label for="tipoRequisito">Tipo de requisito</label>
				<select class="form-control" name="requisito.tipoRequisito-{{i}}" [(ngModel)]="objetoDisciplina.requisitos[i].tipoRequisito" [ngModelOptions]="{standalone: true}">
					<option value="">---Selecione---</option>
					<option value="1">Pré-Requisito</option>
					<option value="2">Co-Requisito</option>
				</select>
			</div>
			<div class="form-group col-sm-5">
				<label for="disciplina">Disciplina</label>
				<!--inserir no name do select: -{{i}} para atualizar a lista-->
				<select class="form-control" name="idRequisito-{{i}}" [(ngModel)]="objetoDisciplina.requisitos[i].idRequisito" [ngModelOptions]="{standalone: true}">
					<option *ngFor="let disciplina of getPossiveis(objetoDisciplina.requisitos[i].tipoRequisito)" [value]="disciplina.id">[{{disciplina.periodo}}]-{{disciplina.nome}}</option>
				</select>
			</div>

<<<<<<< HEAD
	<h3>Requisitos</h3>
	<div *ngIf="objetoDisciplina != undefined">
		<div class="" *ngFor="let requisito of objetoDisciplina.requisitos; let i = index">
			<label for="tipoRequisito">Tipo Requisito</label>
			<select class="form-control" (ngModelChange)="valuechange($event, i)" name="requisito.tipoRequisito-{{i}}" [(ngModel)]="objetoDisciplina.requisitos[i].tipoRequisito" [ngModelOptions]="{standalone: true}">
				<option value="">---Selecione---</option>
				<option value="1">Pré-Requisito</option>
				<option value="2">Co-Requisito</option>
			</select>

			<div class="alert alert-danger text-center" *ngIf="estaBloqueado(i)">
				<span>Ao alterar o tipo de requisito você deve atualizar também a disciplina</span>
			</div>

			<label for="disciplina">Disciplina</label>
			<!--inserir no name do select: -{{i}} para atualizar a lista-->
			<select id="disciplinaRequisito" name="idRequisito-{{i}}" [(ngModel)]="objetoDisciplina.requisitos[i].idRequisito" [ngModelOptions]="{standalone: true}">
				<option *ngFor="let disciplina of getPossiveis(objetoDisciplina.requisitos[i].tipoRequisito)" [value]="disciplina.id">[{{disciplina.periodo}}]-{{disciplina.nome}}</option>
			</select>
=======
			<div class="form-btn col-sm-2 mt-btn-form-2">
				<button type="button" class="btn btn-danger" name="button" (click)="removerRequisito(i)">Remover</button>
			</div>
>>>>>>> 4d59f4486a7da5c72864947d09415cb572d557ca

		</div>
	<!--</div>-->

	<button type="button" class="btn btn-primary" name="button" (click)="adicionarRequisito()" [disabled]='provider.curso == undefined'>Adicionar Requisito</button><br><br>


<<<<<<< HEAD
	<button type="submit" [disabled]="form == undefined || !form.valid || algumBloqueado()">Salvar</button>
	<button type="button" (click)="voltar()" >Voltar</button>
=======
	<button type="submit" class="btn btn-success" [disabled]="form == undefined || !form.valid">Salvar</button>
	<button type="button" class="btn btn-secondary" (click)="voltar()" >Voltar</button>
>>>>>>> 4d59f4486a7da5c72864947d09415cb572d557ca

</form>
